export function renderCatSideView(ctx, options = {
  pose: 'idle',
  flipX: false,
  frameIndex: 0,
  scale: 2,
  colors: [
    'rgba(0,0,0,0)',
    '#000000',
    '#a2998d',
    '#5c5751',
    '#413f3a',
    '#ecdcc9',
    '#f26060',
  ],
}) {
  const frames = [
    [
      `00000000000010001000`,
      `00000000000121012100`,
      `00000000001263136100`,
      `00011100012333333310`,
      `00122310012333333310`,
      `01231510013343334310`,
      `01310100013313531310`,
      `01310001113335653310`,
      `01341115534355555100`,
      `00133222333432221000`,
      `00133333333344411000`,
      `00133333333333241000`,
      `00133444444443310000`,
      `00134111111111410000`,
      `00131130001410131000`,
      `00121000001310012100`,
    ],
    [
      `00000000000010001000`,
      `00000000000121012100`,
      `00000000001263136100`,
      `00000000012333333310`,
      `00111000012333333310`,
      `01223100013343334310`,
      `12315100013313531310`,
      `13101001113335653310`,
      `13111115534355555100`,
      `01332222333432221000`,
      `01333333333344411000`,
      `01333333333333241000`,
      `11133334444433241100`,
      `23344411111143314300`,
      `11111100000013111100`,
      `00001310000012100000`,
    ],
    [
      `00000000000010001000`,
      `00000000000121012100`,
      `00000000001263136100`,
      `00011100012333333310`,
      `00122310012333333310`,
      `01231510013343334310`,
      `01310100013313531310`,
      `01310001113335653310`,
      `01341115534355555100`,
      `00133222333432221000`,
      `00133333333344411000`,
      `00133333333333231000`,
      `00143331144333210000`,
      `00014433211433110000`,
      `00141111100131141000`,
      `00131000000121013100`,
    ],
    [
      `00000000000010001000`,
      `00000000000121012100`,
      `00000000001263136100`,
      `00011100012333333310`,
      `00122310012333333310`,
      `01231510013343334310`,
      `01310100013313531310`,
      `01310001113335653310`,
      `01341115534355555100`,
      `00133222333432221000`,
      `00133333333344411000`,
      `00133333333333241000`,
      `00133444444443310000`,
      `00134111111111410000`,
      `00131130001410131000`,
      `00121000001310012100`,
    ],
  ]
  const idleFrames = [
    [
      `00000000000010001000`,
      `00000000000121012100`,
      `00000000001263136100`,
      `00011100012333333310`,
      `00122310012333333310`,
      `01231510013343334310`,
      `01310100013313531310`,
      `01310001113335653310`,
      `01341115534355555100`,
      `00133222333432221000`,
      `00133333333344411000`,
      `00143333333333231000`,
      `00013344444333231000`,
      `00013411111434110000`,
      `00013141000131410000`,
      `00012131000121310000`,
    ],
  ]
  const jumpingFrames = [
    [
      `000000000000000000`,
      `000000000000000000`,
      `000000000000000000`,
      `000000000001000100`,
      `000000000012101210`,
      `001110000126313610`,
      `012231001233333331`,
      `123141001233333331`,
      `131010001332333201`,
      `131000111331353101`,
      `134111441333565001`,
      `013322233435555510`,
      `013333333343222100`,
      `113344443334444110`,
      `233411111111133320`,
      `111100000000011110`,
    ],
  ]
  const attackingFrames = [
    [
      `000000001000100`,
      `000000012101210`,
      `000000126313610`,
      `000001233333331`,
      `000001233333331`,
      `000001334333431`,
      `000001331353131`,
      `000001333565331`,
      `000001435555510`,
      `000013143222100`,
      `000013334441000`,
      `000015333111000`,
      `000015233314100`,
      `000012333314100`,
      `000012331314100`,
      `011013331213100`,
      `125113333111000`,
      `131013333110000`,
      `143133333310000`,
      `014443333310000`,
      `001114333410000`,
      `000001434110000`,
      `000000131410000`,
      `000000121310000`,
    ],
  ]
  let frame
  console.log(options.pose)
  if (options.pose === 'idle') {
    frame = idleFrames?.[options.frameIndex] ?? idleFrames[0]
  } else if (options.pose === 'jump') {
    frame = jumpingFrames?.[options.frameIndex] ?? jumpingFrames[0]
  } else if (options.pose === 'attack') {
    frame = attackingFrames?.[options.frameIndex] ?? attackingFrames[0]
  } else {
    frame = frames?.[options.frameIndex] ?? frames[0]
  }
  ctx.fillStyle = 'rgba(0,0,0)'
  ctx.fillRect(0, 0, options.width, options.height)
  drawPixels(ctx, frame, {
    scale: options.scale,
    flipX: options.flipX,
    colors: options.colors,
    shiftY: options.heightShift,
  })
}

function drawPixels(ctx, pixels, { scale, colors, flipX, shiftY = 0 }) {
  for (let j = 0; j < pixels.length; j++) {
    for (let i = 0; i < pixels[j].length; i++) {
      const p = pixels[j][i];
      ctx.fillStyle = colors[p];
      const x = flipX ? (20 - 1 - i) * scale : i * scale
      const y = j * scale + (scale >= 2.2 ? shiftY / 2 : shiftY)
      ctx.fillRect(x, y, scale, scale);
    }
  }
}